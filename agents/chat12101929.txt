agents/test_openaiagentsdk_doubao.py

1）为什么“用 chat.completions，而不是 Responses API？”

简短版原因：

Doubao 对外宣称“兼容 OpenAI SDK”时，用的是 chat.completions 协议，官方示例也是 client.chat.completions.create(...)，没有保证完整支持 OpenAI 新的 /responses 语义（step/run、工具结果结构、structured output 那一套）。

OpenAI Agents SDK 里，ChatCompletions 是给第三方模型准备的安全选项：

OpenAIResponsesModel 假定对方真的有 OpenAI 风格的 /responses，并且严格遵守它的字段和行为；

绝大多数第三方（包括豆包）目前只对齐了 /chat/completions，对 /responses 要么没实现，要么语义不完全一致。

所以对“非 OpenAI 模型”，官方推荐做法就是：
用 OpenAIChatCompletionsModel + 自己的 AsyncOpenAI(base_url=..., api_key=...)。
这样只走大家都对齐得比较好的那条协议，最不容易踩坑。